<!-- Sync Impact Report:
Version change: 1.0.0 → 1.1.0
Added sections: Complete Phase IV constitution with all principles and agent roles
Removed sections: Previous Phase 3 constitution
Modified sections: All sections replaced for Phase IV
Templates requiring updates: .specify/templates/plan-template.md, .specify/templates/spec-template.md, .specify/templates/tasks-template.md ✅ updated
Follow-up TODOs: None
-->
# SpecificationPlus Constitution: Phase IV – Cloud-Native Todo Chatbot

## Project Title
Cloud-Native Todo Chatbot – Local Kubernetes Deployment

## Purpose
This constitution governs how AI agents collaborate to design, containerize, deploy, operate, and validate the Todo Chatbot on a local Kubernetes cluster (Minikube) using a spec-driven, no-manual-coding approach.

## Core Principles

1. **Spec-Driven First**: All actions must originate from an explicit specification.
2. **No Manual Coding**: Dockerfiles, Kubernetes manifests, and Helm charts are generated by AI agents only.
3. **Local-First**: Deployment target is Minikube (no cloud dependency).
4. **Reproducibility**: Outputs must be deterministic and re-runnable.
5. **Observability & Health**: Agents must verify health and readiness.
6. **Safety & Least Privilege**: Minimal permissions and resources.

## Tooling Canon
- Containerization: Docker Desktop
- Docker AI: Gordon (fallback to CLI if unavailable)
- Orchestration: Kubernetes (Minikube)
- Package Manager: Helm
- AI DevOps: kubectl-ai, kagent

## Agent Roles & Authority

### Agent A — Specification Agent
- **Authority**: Define WHAT to deploy.
- **Inputs**: Phase III app requirements.
- **Outputs**: `deployment-spec` (components, ports, env, replicas, resources).
- **Constraints**: No implementation details.

### Agent B — Planning Agent
- **Authority**: Define HOW to execute.
- **Outputs**: Ordered plan mapping steps to tools (Gordon, kubectl-ai, kagent).

### Agent C — Docker AI Agent (Gordon)
- **Authority**: Container build lifecycle.
- **Outputs**: Images for frontend/backend.
- **Rules**: Optimize size; tag for Minikube.

### Agent D — Helm Generation Agent (kubectl-ai)
- **Authority**: Create Helm charts.
- **Outputs**: Chart structure, templates, `values.yaml`.
- **Rules**: Parametrize images/replicas; NodePort for frontend, ClusterIP for backend.

### Agent E — Kubernetes Ops Agent (kagent)
- **Authority**: Cluster intelligence.
- **Outputs**: Health analysis, tuning recommendations.

### Agent F — Deployment & Validation Agent
- **Authority**: Execute deployment and verify.
- **Outputs**: Deployed, healthy application.
- **Rules**: Confirm readiness, accessibility, functionality.

## Execution Workflow
1. Specification Agent creates deployment specification
2. Planning Agent designs implementation approach
3. Docker AI Agent creates optimized container images
4. Helm Generation Agent creates Helm charts
5. Kubernetes Ops Agent analyzes cluster requirements
6. Deployment & Validation Agent executes and verifies

## Acceptance Criteria
- All pods in Ready state
- Frontend accessible via NodePort
- Backend API responsive
- Database connectivity established
- Helm install successful
- Health checks passing
- Application functionality validated

## Prohibitions
- Manual creation of Dockerfiles, YAML manifests, or Kubernetes resources
- Direct cloud deployment (must use local Minikube)
- Hardcoded credentials or secrets in plain text
- Deployment to production environments without proper review

## Audit & Evidence
All specifications, plans, task lists, and execution commands must be logged and preserved in the project history for auditability and reproducibility.

## Amendment Process
Changes to this constitution require Specification Agent revision and Planning Agent approval before taking effect.

**Version**: 1.1.0 | **Ratified**: 2026-02-04 | **Last Amended**: 2026-02-04